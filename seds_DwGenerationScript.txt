-- Generated by Oracle SQL Developer Data Modeler 22.2.0.165.1149
--   at:        2022-11-03 15:14:57 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE nv_dw_city (
    cityid             INTEGER NOT NULL,
    cityname           VARCHAR2(50 CHAR) NOT NULL,
    nv_dw_region_regid INTEGER NOT NULL
);

ALTER TABLE nv_dw_city ADD CONSTRAINT nv_dw_city_pk PRIMARY KEY ( cityid );

CREATE TABLE nv_dw_country (
    countryid   INTEGER NOT NULL,
    countryname VARCHAR2(50 CHAR) NOT NULL
);

ALTER TABLE nv_dw_country ADD CONSTRAINT nv_dw_country_pk PRIMARY KEY ( countryid );

CREATE TABLE nv_dw_customer (
    custid            INTEGER NOT NULL,
    custname          VARCHAR2(100 CHAR) NOT NULL,
    salesperson       VARCHAR2(100 CHAR) NOT NULL,
    custaddress       VARCHAR2(100 CHAR) NOT NULL,
    custphone         VARCHAR2(20 CHAR) NOT NULL,
    custage           VARCHAR2(10 CHAR) NOT NULL,
    nv_dw_city_cityid INTEGER NOT NULL
);

ALTER TABLE nv_dw_customer ADD CONSTRAINT nv_dw_customer_pk PRIMARY KEY ( custid );

CREATE TABLE nv_dw_product (
    prodid                   INTEGER NOT NULL,
    prodname                 VARCHAR2(50 CHAR) NOT NULL,
    prodprice                NUMBER(8, 2) NOT NULL,
    nv_dw_productfamily_pfid INTEGER NOT NULL,
    nv_dw_sales_salesid      INTEGER NOT NULL
);

ALTER TABLE nv_dw_product ADD CONSTRAINT nv_dw_product_pk PRIMARY KEY ( prodid );

CREATE TABLE nv_dw_productfamily (
    pfid   INTEGER NOT NULL,
    pfname INTEGER NOT NULL
);

ALTER TABLE nv_dw_productfamily ADD CONSTRAINT nv_dw_productfamily_pk PRIMARY KEY ( pfid );

CREATE TABLE nv_dw_region (
    regid                   INTEGER NOT NULL,
    regname                 VARCHAR2(50 CHAR) NOT NULL,
    nv_dw_country_countryid INTEGER NOT NULL
);

ALTER TABLE nv_dw_region ADD CONSTRAINT nv_dw_region_pk PRIMARY KEY ( regid );

CREATE TABLE nv_dw_sales (
    salesid               INTEGER NOT NULL,
    quantity              NUMBER(8, 2) NOT NULL,
    amount                NUMBER(8, 2) NOT NULL,
    firstorderdate        DATE NOT NULL,
    lastorderdate         DATE NOT NULL,
    nv_dw_time_timeid     INTEGER NOT NULL,
    nv_dw_customer_custid INTEGER NOT NULL
);

ALTER TABLE nv_dw_sales ADD CONSTRAINT nv_dw_sales_pk PRIMARY KEY ( salesid );

CREATE TABLE nv_dw_time (
    timeid      INTEGER NOT NULL,
    day         INTEGER NOT NULL,
    month       VARCHAR2(15 CHAR) NOT NULL,
    year        INTEGER NOT NULL,
    "date"      DATE NOT NULL,
    dayinyear   INTEGER NOT NULL,
    monthinyear INTEGER NOT NULL
);

ALTER TABLE nv_dw_time ADD CONSTRAINT nv_dw_time_pk PRIMARY KEY ( timeid );

ALTER TABLE nv_dw_city
    ADD CONSTRAINT nv_dw_city_nv_dw_region_fk FOREIGN KEY ( nv_dw_region_regid )
        REFERENCES nv_dw_region ( regid );

ALTER TABLE nv_dw_customer
    ADD CONSTRAINT nv_dw_customer_nv_dw_city_fk FOREIGN KEY ( nv_dw_city_cityid )
        REFERENCES nv_dw_city ( cityid );

ALTER TABLE nv_dw_product
    ADD CONSTRAINT nv_dw_prod_nv_dw_pf_fk FOREIGN KEY ( nv_dw_productfamily_pfid )
        REFERENCES nv_dw_productfamily ( pfid );

ALTER TABLE nv_dw_product
    ADD CONSTRAINT nv_dw_product_nv_dw_sales_fk FOREIGN KEY ( nv_dw_sales_salesid )
        REFERENCES nv_dw_sales ( salesid );

ALTER TABLE nv_dw_region
    ADD CONSTRAINT nv_dw_region_nv_dw_country_fk FOREIGN KEY ( nv_dw_country_countryid )
        REFERENCES nv_dw_country ( countryid );

ALTER TABLE nv_dw_sales
    ADD CONSTRAINT nv_dw_sales_nv_dw_customer_fk FOREIGN KEY ( nv_dw_customer_custid )
        REFERENCES nv_dw_customer ( custid );

ALTER TABLE nv_dw_sales
    ADD CONSTRAINT nv_dw_sales_nv_dw_time_fk FOREIGN KEY ( nv_dw_time_timeid )
        REFERENCES nv_dw_time ( timeid );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             8
-- CREATE INDEX                             0
-- ALTER TABLE                             15
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   1
-- WARNINGS                                 0
